package com.thalhamer.numbersgame.Activity;import android.content.Intent;import android.media.AudioManager;import android.os.Bundle;import android.support.v4.app.Fragment;import android.support.v4.app.FragmentActivity;import android.support.v4.view.ViewPager;import android.util.Log;import android.view.View;import android.view.Window;import android.view.WindowManager;import android.widget.TextView;import com.thalhamer.numbersgame.Factory.App;import com.thalhamer.numbersgame.Fragment.EpicFragment;import com.thalhamer.numbersgame.R;import com.thalhamer.numbersgame.enums.CalcType;import com.thalhamer.numbersgame.enums.Character;import com.thalhamer.numbersgame.services.AdvertisementService;import com.thalhamer.numbersgame.services.SavedDataService;import com.thalhamer.numbersgame.viewhelper.ActivityHelper;import java.util.ArrayList;import java.util.List;/** * choose epic activity * <p/> * Created by Brian on 5/5/2015. */public class ChooseEpicActivity extends FragmentActivity implements View.OnClickListener {    private SavedDataService savedDataService = new SavedDataService();    private ActivityHelper activityHelper = new ActivityHelper();    private AdvertisementService advertisementService = new AdvertisementService();    @Override    public void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        Intent intent = getIntent();        setVolumeControlStream(AudioManager.STREAM_MUSIC);        requestWindowFeature(Window.FEATURE_NO_TITLE);        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);        setContentView(R.layout.activity_choose_epic);        //creates reference to first level of game if doesn't exist        savedDataService.saveKey(savedDataService.constructSectionName(1, 1), 1);        TextView textView = (TextView) findViewById(R.id.stars_epic);        int totalStarCount = savedDataService.getIntKeyValue(getString(R.string.total_stars_key), 0);        textView.setText(String.format("Total: %d", totalStarCount));        final List<Fragment> fragments = getFragments();        final ViewPager pager = (ViewPager) findViewById(R.id.epicViewPager);        final TextView leftArrow = (TextView) findViewById(R.id.leftArrow);        final TextView rightArrow = (TextView) findViewById(R.id.rightArrow);        activityHelper.setViewPager(this, fragments, pager, leftArrow, rightArrow);        if (intent.hasExtra("epic")) {            pager.setCurrentItem(intent.getIntExtra("epic", 1) - 1);        }        advertisementService.initInterstitialAd();//        createMockData();    }    private void createMockData() {//        savedDataService.saveKey(PowerEnum.CLEAR_ONE_ENUM.toString(), 6);//        savedDataService.saveKey(PowerEnum.CLEAR_ALL_NUM.toString(), 0);        savedDataService.removeKey(CalcType.ADD.toString());//        savedDataService.removeKey(savedDataService.constructSectionName(1, 2));//        savedDataService.removeKey(savedDataService.constructSectionName(1, 3));//        for (int k = 1; k <= 3; k++) {//            for (int j = 1; j <= 3; j++) {//                savedDataService.saveKey(savedDataService.constructSectionName(k, j), 1);//                for (int i = 1; i <= 9; i++) {//                    savedDataService.saveKey(savedDataService.constructLevelName(k, j, i), 0);//                }//            }//        }//////        savedDataService.saveKey(getString(R.string.total_stars_key), 5);    }    private List<Fragment> getFragments() {        List<Fragment> fList = new ArrayList<>();        SavedDataService savedDataService = new SavedDataService();        fList.add(EpicFragment.newInstance(R.mipmap.einstein, Character.EINSTEIN.getEpic(), 3, savedDataService, this, Character.EINSTEIN.getName()));        fList.add(EpicFragment.newInstance(R.mipmap.newton, Character.NEWTON.getEpic(), 3, savedDataService, this, Character.NEWTON.getName()));        fList.add(EpicFragment.newInstance(R.mipmap.galileo, Character.GALILEO.getEpic(), 3, savedDataService, this, Character.GALILEO.getName()));        return fList;    }    @Override    public void onClick(View v) {        int epic = Integer.parseInt((String) v.getTag(R.string.chosen_epic));        Character character = Character.getCharacterFromEpic(epic);        character.getMediaPlayer().start();        Intent intent = new Intent(this, ChooseLevelActivity.class);        intent.putExtra(getString(R.string.epic), epic);        startActivity(intent);    }    @Override    public void onBackPressed() {        Intent intent = new Intent(App.getContext(), OpeningScreenActivity.class);        startActivity(intent);    }    @Override    protected void onDestroy() {        Log.d("ChooseLevelActivity", "Activity is being destroyed");        super.onDestroy();    }}