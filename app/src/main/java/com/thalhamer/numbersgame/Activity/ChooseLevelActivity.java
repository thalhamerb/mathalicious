package com.thalhamer.numbersgame.Activity;import android.content.Intent;import android.media.AudioManager;import android.os.Bundle;import android.support.v4.app.Fragment;import android.support.v4.app.FragmentActivity;import android.support.v4.view.ViewPager;import android.view.View;import android.view.ViewGroup;import android.view.Window;import android.view.WindowManager;import android.widget.ImageView;import android.widget.TextView;import com.google.android.gms.ads.AdRequest;import com.google.android.gms.ads.AdView;import com.thalhamer.numbersgame.Factory.App;import com.thalhamer.numbersgame.Fragment.LevelFragment;import com.thalhamer.numbersgame.Modules.ChooseLevelActivityModule;import com.thalhamer.numbersgame.R;import com.thalhamer.numbersgame.domain.GridData;import com.thalhamer.numbersgame.domain.LevelData;import com.thalhamer.numbersgame.enums.Character;import com.thalhamer.numbersgame.enums.sounds.SoundEnum;import com.thalhamer.numbersgame.services.SavedDataService;import com.thalhamer.numbersgame.services.popup.LevelInfoPopupService;import com.thalhamer.numbersgame.viewhelper.ActivityHelper;import com.thalhamer.numbersgame.viewhelper.TouchStateHolder;import org.json.JSONException;import java.io.IOException;import java.util.ArrayList;import java.util.List;import javax.inject.Inject;import dagger.ObjectGraph;public class ChooseLevelActivity extends FragmentActivity implements View.OnClickListener {    @Inject    SavedDataService savedDataService;    @Inject    LevelInfoPopupService levelInfoPopupService;    @Inject    ActivityHelper activityHelper;    private Integer epic;    private Integer section;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        ObjectGraph objectGraph = App.getmObjectGraph().plus(new ChooseLevelActivityModule());        objectGraph.inject(this);        setVolumeControlStream(AudioManager.STREAM_MUSIC);        Intent intent = getIntent();        epic = intent.getIntExtra("epic", -1);        section = intent.getIntExtra("section", -1);        requestWindowFeature(Window.FEATURE_NO_TITLE);        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);        setContentView(R.layout.activity_choose_level);        View activity_view = findViewById(R.id.activity_choose_level);        ImageView character = (ImageView) activity_view.findViewById(R.id.character);        character.setBackgroundResource(Character.getCharacterFromEpic(epic).getFaceResourceId());        List<Fragment> fList = new ArrayList<>();        for (int section = 1; section <= 3; section++) {            fList.add(LevelFragment.newInstance(epic, section, savedDataService, this));        }        final ViewPager pager = (ViewPager) findViewById(R.id.levelViewPager);        final TextView leftArrow = (TextView) findViewById(R.id.leftArrow);        final TextView rightArrow = (TextView) findViewById(R.id.rightArrow);        activityHelper.setViewPager(this, fList, pager, leftArrow, rightArrow);        pager.setCurrentItem(section - 1);        getPackageName();        initAdBanner();    }    private void initAdBanner() {//        AdView mAdView = (AdView) findViewById(R.id.adView);//        AdRequest adRequest = new AdRequest.Builder().build();//        mAdView.loadAd(adRequest);        //TODO switch to code above when ready to deploy (no longer use test ones)        AdView mAdView = (AdView) findViewById(R.id.adView);        AdRequest adRequest = new AdRequest.Builder()                .addTestDevice(AdRequest.DEVICE_ID_EMULATOR)  // All emulators                .addTestDevice("B14D1799161A1F2CD52AD9301DD68B37DE")  // My test phone                .build();        mAdView.loadAd(adRequest);    }    @Override    protected void onStop() {        super.onStop();    }    @Override    public void onClick(View v) {        try {            SoundEnum.CLICK1.getMediaPlayer().start();            String tag = (String) v.getTag();            String[] splitTag = tag.split("-");            LevelData levelData = new LevelData(epic, Integer.parseInt(splitTag[0]), Integer.parseInt(splitTag[1]));            levelInfoPopupService.createLevelInfoPopup(ChooseLevelActivity.this, levelData, (ViewGroup) findViewById(R.id.activity_choose_level), false);            TouchStateHolder.setTouchState(GridData.TouchState.DISABLED);        } catch (JSONException | IOException e) {            e.printStackTrace();        }    }    @Override    public void onBackPressed() {        Intent intent = new Intent(App.getContext(), ChooseEpicActivity.class);        intent.putExtra("epic", epic);        startActivity(intent);    }}