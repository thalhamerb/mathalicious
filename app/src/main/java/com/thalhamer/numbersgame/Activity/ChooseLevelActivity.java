package com.thalhamer.numbersgame.Activity;import android.content.Intent;import android.media.AudioManager;import android.os.Bundle;import android.support.annotation.NonNull;import android.support.v4.app.Fragment;import android.support.v4.app.FragmentActivity;import android.support.v4.view.ViewPager;import android.view.View;import android.view.ViewGroup;import android.view.Window;import android.view.WindowManager;import android.widget.ImageView;import android.widget.TextView;import com.google.android.gms.ads.AdView;import com.thalhamer.numbersgame.Factory.App;import com.thalhamer.numbersgame.Fragment.LevelFragment;import com.thalhamer.numbersgame.Modules.ChooseLevelActivityModule;import com.thalhamer.numbersgame.R;import com.thalhamer.numbersgame.domain.GridData;import com.thalhamer.numbersgame.domain.LevelData;import com.thalhamer.numbersgame.domain.PopupResult;import com.thalhamer.numbersgame.enums.Character;import com.thalhamer.numbersgame.enums.sounds.SoundEnum;import com.thalhamer.numbersgame.services.AdvertisementService;import com.thalhamer.numbersgame.services.SavedDataService;import com.thalhamer.numbersgame.services.SectionUnlockService;import com.thalhamer.numbersgame.services.popup.LevelInfoPopupService;import com.thalhamer.numbersgame.viewhelper.ActivityHelper;import com.thalhamer.numbersgame.viewhelper.TouchStateHolder;import java.util.ArrayList;import java.util.List;import javax.inject.Inject;import dagger.ObjectGraph;public class ChooseLevelActivity extends FragmentActivity implements View.OnClickListener {    @Inject    SavedDataService savedDataService;    @Inject    LevelInfoPopupService levelInfoPopupService;    @Inject    ActivityHelper activityHelper;    @Inject    AdvertisementService advertisementService;    @Inject    SectionUnlockService sectionUnlockService;    private Integer epic;    private Integer section;    private ObjectGraph objectGraph;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        objectGraph = App.getmObjectGraph().plus(new ChooseLevelActivityModule());        objectGraph.inject(this);        setVolumeControlStream(AudioManager.STREAM_MUSIC);        Intent intent = getIntent();        epic = intent.getIntExtra("epic", -1);        section = intent.getIntExtra("section", -1);        requestWindowFeature(Window.FEATURE_NO_TITLE);        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);        setContentView(R.layout.choose_level_activity);        View activity_view = findViewById(R.id.choose_level_activity);        ImageView character = (ImageView) activity_view.findViewById(R.id.character);        character.setImageResource(Character.getCharacterFromEpic(epic).getFaceResourceId());        List<Fragment> fList = getFragments();        final ViewPager pager = (ViewPager) findViewById(R.id.levelViewPager);        final TextView leftArrow = (TextView) findViewById(R.id.leftArrow);        final TextView rightArrow = (TextView) findViewById(R.id.rightArrow);        activityHelper.setViewPager(this, fList, pager, leftArrow, rightArrow);        pager.setCurrentItem(section - 1);        getPackageName();        AdView mAdView = (AdView) findViewById(R.id.adView);        advertisementService.initAdBanner(mAdView);    }    @NonNull    private List<Fragment> getFragments() {        LevelFragment.savedDataService = savedDataService;        LevelFragment.chooseLevelActivity = this;        LevelFragment.sectionUnlockService = sectionUnlockService;        List<Fragment> fList = new ArrayList<>();        for (int section = 1; section <= 3; section++) {            fList.add(LevelFragment.newInstance(epic, section));        }        return fList;    }    @Override    protected void onStop() {        super.onStop();    }    @Override    public void onClick(View v) {        SoundEnum.CLICK1.getMediaPlayer().start();        String tag = (String) v.getTag();        String[] splitTag = tag.split("-");        LevelData levelData = new LevelData(epic, Integer.parseInt(splitTag[0]), Integer.parseInt(splitTag[1]));        PopupResult popupResult = new PopupResult(ChooseLevelActivity.this, (ViewGroup) findViewById(R.id.choose_level_activity));        levelInfoPopupService.buildPopupWindow(popupResult, levelData, true, false);        TouchStateHolder.setTouchState(GridData.TouchState.DISABLED);    }    @Override    public void onBackPressed() {        Intent intent = new Intent(App.getContext(), ChooseEpicActivity.class);        intent.putExtra("epic", epic);        startActivity(intent);    }}