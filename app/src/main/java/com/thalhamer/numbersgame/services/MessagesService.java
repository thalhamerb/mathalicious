package com.thalhamer.numbersgame.services;import android.database.Cursor;import android.database.sqlite.SQLiteDatabase;import com.google.common.collect.Lists;import com.thalhamer.numbersgame.Factory.App;import com.thalhamer.numbersgame.database.DatabaseHelper;import com.thalhamer.numbersgame.domain.GameDataHolder;import com.thalhamer.numbersgame.enums.Character;import com.thalhamer.numbersgame.enums.MessageLocation;import com.thalhamer.numbersgame.enums.MessageType;import java.util.List;import javax.inject.Inject;import javax.inject.Singleton;/** * Created by Brian on 7/3/2015. */@Singletonpublic class MessagesService {    public static final String GREAT_JOB = "Great Job!";    @Inject    GameDataHolder gameDataHolder;    DatabaseHelper databaseHelper = new DatabaseHelper(App.getContext());    public String getRandomGameMessage(Character character, MessageType messageType, MessageLocation messageLocation) {        SQLiteDatabase db = databaseHelper.getReadableDatabase();        StringBuilder query = new StringBuilder();        query.append("SELECT message FROM character_messages WHERE message_type=? AND message_location=?");        List<String> parameterList = Lists.newArrayList(messageType.toString(), messageLocation.toString());        if (character != null) {            query.append(" AND character=?");            parameterList.add(character.toString());        }        String[] parameters = new String[parameterList.size()];        parameters = parameterList.toArray(parameters);        Cursor c = db.rawQuery(query.toString(), parameters);        int numOfRows = c.getCount();        if (c.getCount() != 0) {            int randomRow = (int) (Math.random() * numOfRows);            c.moveToPosition(randomRow);            return c.getString(c.getColumnIndex("MESSAGE"));  //Note: needs to be caps (case sensitive for some reason)        } else {            return GREAT_JOB;        }    }}