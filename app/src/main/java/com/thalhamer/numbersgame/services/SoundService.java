package com.thalhamer.numbersgame.services;import android.media.MediaPlayer;import com.thalhamer.numbersgame.Factory.App;import com.thalhamer.numbersgame.domain.Tile;import com.thalhamer.numbersgame.enums.sounds.SoundEnum;import com.thalhamer.numbersgame.enums.sounds.TileCountBeep;import java.util.HashSet;import java.util.List;import java.util.Set;import javax.inject.Inject;/** * sound service * * Created by Brian on 10/16/2015. */public class SoundService {    //this is a hack so that the media player isn't release too early.    // hopefully the issue where sound doesn't always play will stop    private static Set<MediaPlayer> activePlayers = new HashSet<>();    @Inject  //here to bypass weird injection rule for dagger    public SoundService() {    }    public void playTileCountBeep(List<Tile> touchedTiles) {        TileCountBeep tileCountBeep = TileCountBeep.getTileCountBeepByTileCount(touchedTiles.size());        if (tileCountBeep != null) {            tileCountBeep.getMediaPlayer().start();        }    }    public void playSound(SoundEnum soundEnum) {        soundEnum.getMediaPlayer().start();    }    public void playSound(int resourceId) {        final MediaPlayer mediaPlayer = MediaPlayer.create(App.getContext(), resourceId);        activePlayers.add(mediaPlayer);        mediaPlayer.start();        //need finish listener before release        mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {            @Override            public void onCompletion(final MediaPlayer mediaPlayer) {                mediaPlayer.release();                activePlayers.remove(mediaPlayer);            }        });    }}